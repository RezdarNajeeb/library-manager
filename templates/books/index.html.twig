{% extends 'base.html.twig' %}

{% block title %}
    All Books
{% endblock %}

{% block body %}
    <h1 class="text-3xl font-bold text-gray-700 mb-6">All Books</h1>

    <div class="bg-white shadow-md rounded-lg overflow-x-auto">
        <table class="w-full text-left whitespace-no-wrap">
            <thead class="bg-gray-50 border-b-2 border-gray-200">
                <tr>
                    <th class="px-6 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                    <th class="px-6 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider">Author</th>
                    <th class="px-6 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider">Category</th>
                    <th class="px-6 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider">Published</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
            {% for book in books %}
                {% set tenYearsAgo = "now"|date_modify("-10 years") %}
                <tr class="hover:bg-gray-50 transition-colors {{ book.publishedAt < tenYearsAgo ? 'bg-yellow-50' : '' }}">
                    <td class="px-6 py-4">
                        <a href="{{ path('books_show', {'id': book.id}) }}" class="font-medium text-blue-600 hover:underline">{{ book.title }}</a>
                    </td>
                    <td class="px-6 py-4 text-gray-600">{{ book.author }}</td>
                    <td class="px-6 py-4">
                        <a href="{{ path('categories_show', {'id': book.category.id}) }}" class="text-sm text-gray-500 hover:text-blue-600">{{ book.category.name }}</a>
                    </td>
                    <td class="px-6 py-4 text-gray-600">{{ book.publishedAt|date('M d, Y') }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="text-center py-10 text-gray-500">
                        No books found. <a href="{{ path('books_new') }}" class="text-blue-600 hover:underline">Add the first one!</a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
